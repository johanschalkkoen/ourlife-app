<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OurLife Dashboard</title>
  <link rel="icon" type="image/png" href="https://www.flaticon.com/svg/static/icons/svg/3082/3082383.svg">
  <script src="https://cdn.jsdelivr.net/npm/react@18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/react-dom@18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@babel/standalone@7.20.6/babel.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/axios@1.4.0/dist/axios.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css" rel="stylesheet">
  <style>
    /* Base styles */
    body {
      min-height: 100vh;
      overflow-x: hidden;
      transition: background 0.3s ease;
    }

    /* Original Style */
    .style-original body {
      background: linear-gradient(to right, #4facfe, #00f2fe);
      font-family: 'Inter', sans-serif;
      color: #1f2937;
    }
    .style-original main {
      background: none;
    }
    .style-original .fc-event {
      border: 1px solid #1f2937;
      background: #ffffff;
      border-radius: 4px;
      margin: 2px;
      transition: transform 0.2s ease;
    }
    .style-original .fc-event:hover {
      transform: scale(1.02);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }
    .style-original .fc-event-main {
      padding: 4px;
      color: #1f2937;
      font-size: 0.85rem;
    }
    .style-original .fc-event-title {
      font-weight: 600;
    }
    .style-original .fc-event-user {
      font-size: 0.7rem;
      color: #4b5563;
    }
    .style-original .modal {
      transform: scale(0.9);
      opacity: 0;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }
    .style-original .modal.show {
      transform: scale(1);
      opacity: 1;
    }
    .style-original .profile-pic-container {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid #1f2937;
    }
    .style-original .profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    .style-original .event-profile-pic-container {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      border: 1px solid #1f2937;
    }
    .style-original .event-profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    .style-original .welcome-pic-container {
      width: 32px;
      height: 32px;
    }
    .style-original input, .style-original select, .style-original textarea {
      background: #ffffff;
      border: 1px solid #d1d5db;
      border-radius: 4px;
      padding: 0.5rem;
      color: #1f2937;
      transition: border-color 0.2s ease;
    }
    .style-original input:focus, .style-original select:focus, .style-original textarea:focus {
      border-color: #2563eb;
      box-shadow: 0 0 5px rgba(37, 99, 235, 0.3);
      outline: none;
    }
    .style-original input[type="file"] {
      padding: 0.5rem;
    }
    .style-original button {
      background: #2563eb;
      color: #ffffff;
      border: 1px solid #1d4ed8;
      border-radius: 4px;
      padding: 0.5rem 1rem;
      transition: background 0.2s ease, transform 0.2s ease;
    }
    .style-original button:hover {
      background: #1d4ed8;
      transform: scale(1.02);
    }
    .style-original .card {
      background: #ffffff;
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
      padding: 1.5rem;
      transition: transform 0.2s ease;
    }
    .style-original .login-card {
      background: #f9fafb;
      border: 1px solid #d1d5db;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      padding: 2rem;
    }
    .style-original .login-input {
      border: 1px solid #d1d5db;
      background: #ffffff;
      border-radius: 4px;
      padding: 0.5rem;
      color: #1f2937;
    }
    .style-original .login-input:focus {
      border-color: #2563eb;
      box-shadow: 0 0 5px rgba(37, 99, 235, 0.3);
      outline: none;
    }
    .style-original .login-button {
      background: #2563eb;
      border: none;
      border-radius: 4px;
      padding: 0.75rem;
      color: #ffffff;
      font-weight: 600;
    }
    .style-original .login-button:hover {
      background: #1d4ed8;
      transform: scale(1.02);
    }
    .style-original .sticky-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: #f9fafb;
      border-bottom: 1px solid #e5e7eb;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .style-original .nav-links button {
      background: #2563eb;
      color: #ffffff;
      border-radius: 4px;
      padding: 0.5rem 1rem;
    }
    .style-original .nav-links button:hover {
      background: #1d4ed8;
    }
    .style-original .error-boundary {
      text-align: center;
      padding: 2rem;
      color: #dc2626;
      background: #fef2f2;
      border: 1px solid #dc2626;
      border-radius: 8px;
    }

    /* Futuristic HUD Style */
    .style-futuristic body {
      background: url('/assets/futuristic-hud-bg.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Orbitron', sans-serif;
      color: #d9e8ff;
    }
    .style-futuristic main {
      background: url('/assets/futuristic-hud-bg.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    .style-futuristic .fc-event {
      position: relative;
      cursor: pointer;
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      border-radius: 8px;
      background: rgba(0, 15, 27, 0.7);
      box-shadow: 0 0 8px rgba(0, 221, 235, 0.2);
      margin: 4px 6px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .style-futuristic .fc-event:hover {
      transform: scale(1.03);
      box-shadow: 0 0 10px rgba(0, 221, 235, 0.3);
    }
    .style-futuristic .fc-event-main {
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      gap: 4px;
      padding: 8px;
      color: #d9e8ff;
      font-size: 0.875rem;
    }
    .style-futuristic .fc-event-title {
      font-weight: 700;
      text-shadow: 0 0 6px rgba(0, 221, 235, 0.5);
    }
    .style-futuristic .fc-event-user {
      font-size: 0.75rem;
      opacity: 0.8;
    }
    .style-futuristic .modal {
      transform: scale(0.9);
      opacity: 0;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }
    .style-futuristic .modal.show {
      transform: scale(1);
      opacity: 1;
    }
    .style-futuristic .profile-pic-container {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      padding: 2px;
      background: linear-gradient(45deg, #ff00ff, #00ddeb, #ff00ff);
      box-shadow: 0 0 6px rgba(0, 221, 235, 0.3);
    }
    .style-futuristic .profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
      background: #0a0f1b;
    }
    .style-futuristic .event-profile-pic-container {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      padding: 1px;
      background: linear-gradient(45deg, #ff00ff, #00ddeb, #ff00ff);
    }
    .style-futuristic .event-profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    .style-futuristic .welcome-pic-container {
      width: 32px;
      height: 32px;
    }
    .style-futuristic input, .style-futuristic select, .style-futuristic textarea {
      background: rgba(255, 255, 255, 0.03);
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      color: #d9e8ff;
      border-radius: 8px;
      padding: 0.75rem;
      transition: box-shadow 0.2s ease;
    }
    .style-futuristic input:focus, .style-futuristic select:focus, .style-futuristic textarea:focus {
      box-shadow: 0 0 8px rgba(0, 221, 235, 0.3);
      outline: none;
    }
    .style-futuristic input[type="file"] {
      padding: 0.5rem;
    }
    .style-futuristic button {
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      background: rgba(0, 221, 235, 0.1);
      color: #d9e8ff;
      border-radius: 8px;
      padding: 0.75rem;
      transition: background 0.2s ease, transform 0.2s ease;
    }
    .style-futuristic button:hover {
      background: rgba(0, 221, 235, 0.2);
      transform: scale(1.03);
    }
    .style-futuristic .card {
      background: rgba(0, 15, 27, 0.7);
      backdrop-filter: blur(10px);
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0, 221, 235, 0.2);
      position: relative;
      overflow: hidden;
      transition: transform 0.2s ease;
    }
    .style-futuristic .card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 221, 235, 0.03);
      background-image: linear-gradient(rgba(0, 221, 235, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 221, 235, 0.02) 1px, transparent 1px);
      background-size: 10px 10px;
      z-index: -1;
    }
    .style-futuristic .login-card {
      background: rgba(0, 15, 27, 0.85);
      border: 3px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      box-shadow: 0 0 12px rgba(0, 221, 235, 0.3);
      border-radius: 16px;
      padding: 2rem;
      position: relative;
      overflow: hidden;
      transition: box-shadow 0.2s ease;
    }
    .style-futuristic .login-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0, 15, 27, 0.7);
      background-image: linear-gradient(rgba(0, 221, 235, 0.02) 1px, transparent 1px), linear-gradient(90deg, rgba(0, 221, 235, 0.02) 1px, transparent 1px);
      background-size: 10px 10px;
      z-index: 1;
    }
    .style-futuristic .login-card > * {
      position: relative;
      z-index: 2;
    }
    .style-futuristic .login-input {
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      background: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      padding: 0.75rem;
      color: #d9e8ff;
    }
    .style-futuristic .login-input:focus {
      box-shadow: 0 0 8px rgba(0, 221, 235, 0.3);
      outline: none;
    }
    .style-futuristic .login-button {
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      background: linear-gradient(45deg, #00ddeb, #ff00ff);
      border-radius: 8px;
      padding: 0.75rem;
      color: #0a0f1b;
      font-weight: 700;
      transition: background 0.2s ease, transform 0.2s ease;
    }
    .style-futuristic .login-button:hover {
      background: linear-gradient(45deg, #00b7c3, #cc00cc);
      transform: scale(1.03);
    }
    .style-futuristic .sticky-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(0, 15, 27, 0.8);
      backdrop-filter: blur(10px);
      border-bottom: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      box-shadow: 0 0 8px rgba(0, 221, 235, 0.2);
    }
    .style-futuristic .nav-links button {
      background: rgba(0, 221, 235, 0.1);
      border: 2px solid transparent;
      border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      border-radius: 8px;
      padding: 0.5rem 1rem;
      color: #d9e8ff;
      text-shadow: 0 0 4px rgba(0, 221, 235, 0.3);
    }
    .style-futuristic .nav-links button:hover {
      background: linear-gradient(45deg, #00ddeb, #ff00ff);
      color: #0a0f1b;
      transform: scale(1.03);
    }
    .style-futuristic .error-boundary {
      text-align: center;
      padding: 2rem;
      color: #ff5555;
      background: rgba(0, 15, 27, 0.7);
      border: 2px solid #ff5555;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(255, 85, 85, 0.2);
    }

    /* Medieval Red Style */
    .style-medieval body {
      background: url('/assets/medieval-red-bg.jpg') no-repeat center center fixed;
      background-size: cover;
      font-family: 'Cinzel', serif;
      color: #ffebcd;
    }
    .style-medieval main {
      background: url('/assets/medieval-red-bg.jpg') no-repeat center center fixed;
      background-size: cover;
    }
    .style-medieval .fc-event {
      border: 2px solid #8b0000;
      background: rgba(139, 0, 0, 0.7);
      border-radius: 6px;
      margin: 4px 6px;
      transition: transform 0.2s ease;
    }
    .style-medieval .fc-event:hover {
      transform: scale(1.03);
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
    }
    .style-medieval .fc-event-main {
      padding: 8px;
      color: #ffebcd;
      font-size: 0.875rem;
    }
    .style-medieval .fc-event-title {
      font-weight: 700;
      text-shadow: 0 0 4px rgba(255, 215, 0, 0.5);
    }
    .style-medieval .fc-event-user {
      font-size: 0.75rem;
      opacity: 0.8;
    }
    .style-medieval .modal {
      transform: scale(0.9);
      opacity: 0;
      transition: transform 0.2s ease, opacity 0.2s ease;
    }
    .style-medieval .modal.show {
      transform: scale(1);
      opacity: 1;
    }
    .style-medieval .profile-pic-container {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      border: 2px solid #ffd700;
      box-shadow: 0 0 6px rgba(255, 215, 0, 0.3);
    }
    .style-medieval .profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    .style-medieval .event-profile-pic-container {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      border: 1px solid #ffd700;
    }
    .style-medieval .event-profile-pic {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      object-fit: cover;
    }
    .style-medieval .welcome-pic-container {
      width: 32px;
      height: 32px;
    }
    .style-medieval input, .style-medieval select, .style-medieval textarea {
      background: rgba(139, 0, 0, 0.2);
      border: 2px solid #8b0000;
      color: #ffebcd;
      border-radius: 6px;
      padding: 0.75rem;
      transition: box-shadow 0.2s ease;
    }
    .style-medieval input:focus, .style-medieval select:focus, .style-medieval textarea:focus {
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
      outline: none;
    }
    .style-medieval input[type="file"] {
      padding: 0.5rem;
    }
    .style-medieval button {
      border: 2px solid #8b0000;
      background: linear-gradient(45deg, #8b0000, #a52a2a);
      color: #ffebcd;
      border-radius: 6px;
      padding: 0.75rem;
      box-shadow: inset 0 0 5px rgba(255, 215, 0, 0.3);
      transition: background 0.2s ease, transform 0.2s ease;
    }
    .style-medieval button:hover {
      background: linear-gradient(45deg, #a52a2a, #b22222);
      transform: scale(1.03);
    }
    .style-medieval .card {
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #8b0000;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.2);
      padding: 1.5rem;
      transition: transform 0.2s ease;
    }
    .style-medieval .login-card {
      background: rgba(0, 0, 0, 0.85);
      border: 3px solid #8b0000;
      box-shadow: 0 0 12px rgba(255, 215, 0, 0.3);
      border-radius: 12px;
      padding: 2rem;
    }
    .style-medieval .login-input {
      border: 2px solid #8b0000;
      background: rgba(139, 0, 0, 0.2);
      border-radius: 6px;
      padding: 0.75rem;
      color: #ffebcd;
    }
    .style-medieval .login-input:focus {
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.3);
      outline: none;
    }
    .style-medieval .login-button {
      border: 2px solid #8b0000;
      background: linear-gradient(45deg, #8b0000, #a52a2a);
      border-radius: 6px;
      padding: 0.75rem;
      color: #ffebcd;
      font-weight: 700;
      transition: background 0.2s ease, transform 0.2s ease;
    }
    .style-medieval .login-button:hover {
      background: linear-gradient(45deg, #a52a2a, #b22222);
      transform: scale(1.03);
    }
    .style-medieval .sticky-header {
      position: sticky;
      top: 0;
      z-index: 50;
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 2px solid #8b0000;
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.2);
    }
    .style-medieval .nav-links button {
      background: linear-gradient(45deg, #8b0000, #a52a2a);
      border: 2px solid #8b0000;
      border-radius: 6px;
      padding: 0.5rem 1rem;
      color: #ffebcd;
      box-shadow: inset 0 0 5px rgba(255, 215, 0, 0.3);
    }
    .style-medieval .nav-links button:hover {
      background: linear-gradient(45deg, #a52a2a, #b22222);
      transform: scale(1.03);
    }
    .style-medieval .error-boundary {
      text-align: center;
      padding: 2rem;
      color: #ff5555;
      background: rgba(0, 0, 0, 0.7);
      border: 2px solid #8b0000;
      border-radius: 10px;
      box-shadow: 0 0 8px rgba(255, 215, 0, 0.2);
    }

    @keyframes subtle-glow {
      0% { box-shadow: 0 0 8px rgba(0, 221, 235, 0.2); }
      100% { box-shadow: 0 0 12px rgba(0, 221, 235, 0.3); }
    }
    .style-futuristic .login-card {
      animation: subtle-glow 3s ease-in-out alternate;
    }
    @keyframes medieval-glow {
      0% { box-shadow: 0 0 8px rgba(255, 215, 0, 0.2); }
      100% { box-shadow: 0 0 12px rgba(255, 215, 0, 0.3); }
    }
    .style-medieval .login-card {
      animation: medieval-glow 3s ease-in-out alternate;
    }

    @media (max-width: 768px) {
      .hamburger-menu {
        display: block;
      }
      .nav-links {
        display: none;
      }
      .nav-links.open {
        display: flex;
        flex-direction: column;
        position: absolute;
        top: 64px;
        left: 0;
        right: 0;
        background: inherit;
        border-bottom: 2px solid transparent;
        border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
        z-index: 40;
      }
      .style-original .nav-links.open {
        background: #f9fafb;
        border-bottom: 1px solid #e5e7eb;
      }
      .style-futuristic .nav-links.open {
        background: rgba(0, 15, 27, 0.9);
        border-bottom: 2px solid transparent;
        border-image: linear-gradient(45deg, #00ddeb, #ff00ff) 1;
      }
      .style-medieval .nav-links.open {
        background: rgba(0, 0, 0, 0.9);
        border-bottom: 2px solid #8b0000;
      }
    }
  </style>
</head>
<body>
  <div id="root"></div>
  <script type="text/babel">
    const { useState, useEffect, useRef } = React;
    const DEFAULT_PROFILE_PIC_URL = '/uploads/default-profile.png';
    const DEFAULT_EVENT_COLOR = '#00ddeb';
    const capitalizeFirstLetter = s => s ? s.charAt(0).toUpperCase() + s.slice(1) : '';
    const getCurrentDateTime = () => new Date(new Date().setMinutes(new Date().getMinutes() - new Date().getTimezoneOffset())).toISOString().slice(0, 19);
    const formatDateTimeWithSeconds = d => new Date(d).toLocaleString('en-ZA', { year: 'numeric', month: '2-digit', day: '2-digit', hour: '2-digit', minute: '2-digit', second: '2-digit', hour12: false }).replace(/,/, '');

    class ErrorBoundary extends React.Component {
      state = { hasError: false, errorMessage: '' };
      static getDerivedStateFromError(error) { return { hasError: true, errorMessage: error.message }; }
      componentDidCatch(error, errorInfo) { console.error('ErrorBoundary caught:', error, errorInfo); }
      render() {
        return this.state.hasError ? (
          <div className="error-boundary">
            <h1>Something went wrong.</h1>
            <p>{this.state.errorMessage}</p>
            <button onClick={() => window.location.reload()} className="px-4 py-2 bg-teal-500 text-white rounded-lg hover:bg-teal-600">Reload Page</button>
          </div>
        ) : this.props.children;
      }
    }

    const Navigation = ({ user, setPage, onLogout }) => {
      const [isMenuOpen, setIsMenuOpen] = useState(false);
      const toggleMenu = () => setIsMenuOpen(!isMenuOpen);
      const handleNavClick = p => { setPage(p); setIsMenuOpen(false); };
      return (
        <nav className="sticky-header p-4 flex items-center justify-between">
          <div className="flex items-center gap-3">
            <img src="https://www.flaticon.com/svg/static/icons/svg/3082/3082383.svg" alt="OurLife Logo" className="w-8 h-8" />
            <h1 className="text-xl font-bold">OurLife Dashboard</h1>
          </div>
          <button className="hamburger-menu md:hidden focus:outline-none" onClick={toggleMenu} aria-label="Toggle menu">
            <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path strokeLinecap="round" strokeLinejoin="round" strokeWidth="2" d="M4 6h16M4 12h16m-7 6h7" /></svg>
          </button>
          <div className={`nav-links flex-col md:flex-row md:flex space-x-0 md:space-x-2 ${isMenuOpen ? 'open' : ''}`}>
            {['menu', 'transactions', 'calendar', 'profileSettings', 'budgetCalculator', 'about', 'support', 'contact'].map(p => (
              <button key={p} onClick={() => handleNavClick(p)} className="px-3 py-2">{capitalizeFirstLetter(p === 'menu' ? 'home' : p)}</button>
            ))}
            <button onClick={onLogout} className="px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600">Sign Out</button>
          </div>
        </nav>
      );
    };

    const Login = ({ onLogin }) => {
      const [username, setUsername] = useState('');
      const [password, setPassword] = useState('');
      const [error, setError] = useState('');
      const handleLogin = async e => {
        e.preventDefault();
        setError('');
        try {
          const { data } = await axios.post('https://ourlife.work.gd:8443/api/login', { username, password }, { timeout: 5000 });
          if (data.success) onLogin({ username, profilePicUrl: data.profilePicUrl || DEFAULT_PROFILE_PIC_URL, email: data.email || '', phone: data.phone || '', address: data.address || '', eventColor: data.eventColor || DEFAULT_EVENT_COLOR, isAdmin: data.isAdmin || false });
          else setError(data.message || 'Login failed.');
        } catch (err) {
          setError(err.response?.data?.message || 'Error during login.');
        }
      };
      return (
        <main className="flex items-center justify-center min-h-screen px-4">
          <section className="login-card p-8 w-full max-w-md">
            <h1 className="text-2xl font-bold mb-6 text-center">Sign In</h1>
            <form onSubmit={handleLogin} className="space-y-4">
              <input type="text" value={username} onChange={e => setUsername(e.target.value)} placeholder="Username" className="w-full login-input" aria-label="Username" />
              <input type="password" value={password} onChange={e => setPassword(e.target.value)} placeholder="Password" className="w-full login-input" aria-label="Password" />
              {error && <p className="text-red-400 text-sm text-center">{error}</p>}
              <button type="submit" className="w-full login-button" aria-label="Sign In">Sign In</button>
            </form>
          </section>
        </main>
      );
    };

    const Menu = ({ user, setPage }) => (
      <main className="p-4 sm:p-6 max-w-4xl mx-auto">
        <section className="card p-8">
          <h1 className="text-2xl font-bold mb-6 text-center flex items-center justify-center gap-3">
            <div className="profile-pic-container welcome-pic-container">
              <img src={user.profilePicUrl || DEFAULT_PROFILE_PIC_URL} alt={`${user.username}'s profile`} className="profile-pic" />
            </div>
            <span>Welcome, {capitalizeFirstLetter(user.username)}!</span>
          </h1>
          <div className="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 mb-6">
            {['transactions', 'calendar', 'profileSettings', 'budgetCalculator', 'about', 'support', 'contact'].map(p => (
              <button key={p} onClick={() => setPage(p)} className="p-4 bg-teal-500 text-white rounded-lg hover:bg-teal-600">{capitalizeFirstLetter(p)}</button>
            ))}
          </div>
        </section>
      </main>
    );

    const Transactions = ({ user }) => {
      const [items, setItems] = useState([]);
      const [description, setDescription] = useState('');
      const [amount, setAmount] = useState('');
      const [type, setType] = useState('income');
      const [date, setDate] = useState(getCurrentDateTime());
      const [addToCalendar, setAddToCalendar] = useState(false);
      const [eventTitle, setEventTitle] = useState('');
      const [showAddItemForm, setShowAddItemForm] = useState(false);
      const [accessibleUsers, setAccessibleUsers] = useState([]);
      const [selectedUsers, setSelectedUsers] = useState([user.username]);
      const [userProfiles, setUserProfiles] = useState({ [user.username]: user.profilePicUrl });
      const [searchQuery, setSearchQuery] = useState('');
      const [filterType, setFilterType] = useState('all');

      const fetchAccessibleUsers = async () => {
        try {
          const { data } = await axios.get('https://ourlife.work.gd:8443/api/get-access', { params: { viewer: user.username }, timeout: 5000 });
          if (data.success) {
            const accessible = [user.username, ...data.accessList.filter(a => a.viewer === user.username).map(a => a.target)];
            setAccessibleUsers(accessible);
            setSelectedUsers(accessible);
            const profiles = { [user.username]: user.profilePicUrl || DEFAULT_PROFILE_PIC_URL };
            for (const u of accessible) {
              if (u !== user.username) profiles[u] = (await axios.get(`https://ourlife.work.gd:8443/api/profile-pictures?username=${u}`, { timeout: 5000 })).data.profilePicUrl || DEFAULT_PROFILE_PIC_URL;
            }
            setUserProfiles(profiles);
          }
        } catch (err) {
          setAccessibleUsers([user.username]);
          setSelectedUsers([user.username]);
        }
      };

      const fetchItems = async () => {
        try {
          const { data } = await axios.get('https://ourlife.work.gd:8443/api/transactions', { params: { user: user.username }, timeout: 5000 });
          setItems(data);
        } catch (err) {}
      };

      const addItem = async () => {
        if (!description || !amount || !date) return;
        try {
          const transactionData = { user: user.username, description, amount: parseFloat(amount), type, date, eventTitle: addToCalendar ? eventTitle || description : null };
          const { data } = await axios.post('https://ourlife.work.gd:8443/api/transactions', transactionData, { timeout: 5000 });
          setItems([...items, data]);
          setDescription('');
          setAmount('');
          setType('income');
          setDate(getCurrentDateTime());
          setEventTitle('');
          setAddToCalendar(false);
          setShowAddItemForm(false);
        } catch (err) {}
      };

      const deleteItem = async id => {
        try {
          await axios.delete(`https://ourlife.work.gd:8443/api/transactions/${id}`, { timeout: 5000 });
          setItems(items.filter(item => item.id !== id));
        } catch (err) {}
      };

      const toggleUser = u => setSelectedUsers(p => p.includes(u) ? p.filter(x => x !== u) : [...p, u]);

      useEffect(() => { fetchAccessibleUsers(); fetchItems(); }, []);

      return (
        <main className="p-4 sm:p-6 max-w-4xl mx-auto">
          <section className="card p-8">
            <h1 className="text-2xl font-bold mb-6 flex items-center gap-3">
              <div className="profile-pic-container"><img src={user.profilePicUrl || DEFAULT_PROFILE_PIC_URL} alt={`${user.username}'s profile`} className="profile-pic" /></div>
              <span>Transactions</span>
            </h1>
            <div className="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
              <button onClick={() => setShowAddItemForm(!showAddItemForm)} className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600" aria-label={showAddItemForm ? 'Hide Form' : 'Add Item'}>{showAddItemForm ? 'Hide Form' : 'Add Item'}</button>
              <div className="flex space-x-3 w-full sm:w-auto">
                <input type="text" placeholder="Search by description" value={searchQuery} onChange={e => setSearchQuery(e.target.value)} className="p-3 rounded-lg" aria-label="Search transactions" />
                <select value={filterType} onChange={e => setFilterType(e.target.value)} className="p-3 rounded-lg" aria-label="Filter by type">
                  <option value="all">All</option>
                  <option value="income">Income</option>
                  <option value="expense">Expense</option>
                </select>
              </div>
            </div>
            {showAddItemForm && (
              <div className="mb-6 p-4 card">
                <input type="text" placeholder="Description" value={description} onChange={e => setDescription(e.target.value)} className="w-full p-3 mb-4" aria-label="Description" />
                <input type="number" placeholder="Amount" value={amount} onChange={e => setAmount(e.target.value)} className="w-full p-3 mb-4" aria-label="Amount" />
                <select value={type} onChange={e => setType(e.target.value)} className="w-full p-3 mb-4" aria-label="Type">
                  <option value="income">Income</option>
                  <option value="expense">Expense</option>
                </select>
                <input type="datetime-local" value={date} onChange={e => setDate(e.target.value)} className="w-full p-3 mb-4" aria-label="Date" />
                <label className="flex items-center gap-2 mb-4">
                  <input type="checkbox" checked={addToCalendar} onChange={e => setAddToCalendar(e.target.checked)} className="rounded text-teal-500 focus:ring-teal-400" aria-label="Add to Calendar" />
                  <span>Add to Calendar</span>
                </label>
                {addToCalendar && (
                  <input type="text" placeholder="Event Title (optional)" value={eventTitle} onChange={e => setEventTitle(e.target.value)} className="w-full p-3 mb-4" aria-label="Event Title" />
                )}
                <button onClick={addItem} className="w-full p-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600" aria-label="Add Transaction">Add Transaction</button>
              </div>
            )}
            <div className="mb-6">
              <h2 className="text-lg font-semibold mb-2">Filter by User</h2>
              <div className="flex flex-wrap gap-2">
                {accessibleUsers.map(u => (
                  <label key={u} className="flex items-center gap-2">
                    <input type="checkbox" checked={selectedUsers.includes(u)} onChange={() => toggleUser(u)} className="rounded text-teal-500 focus:ring-teal-400" aria-label={`Filter by ${u}`} />
                    <div className="event-profile-pic-container"><img src={userProfiles[u] || DEFAULT_PROFILE_PIC_URL} alt={`${u}'s profile`} className="event-profile-pic" /></div>
                    <span>{capitalizeFirstLetter(u)}</span>
                  </label>
                ))}
              </div>
            </div>
            <div className="space-y-4">
              {items
                .filter(item => selectedUsers.includes(item.user) && item.description.toLowerCase().includes(searchQuery.toLowerCase()) && (filterType === 'all' || item.type === filterType))
                .map(item => (
                  <div key={item.id} className="card p-4 flex justify-between items-center">
                    <div className="flex items-center gap-3">
                      <div className="event-profile-pic-container"><img src={userProfiles[item.user] || DEFAULT_PROFILE_PIC_URL} alt={`${item.user}'s profile`} className="event-profile-pic" /></div>
                      <div>
                        <p className="font-semibold">{item.description}</p>
                        <p className="text-sm">{formatDateTimeWithSeconds(item.date)}</p>
                        <p className="text-sm">User: {capitalizeFirstLetter(item.user)}</p>
                      </div>
                    </div>
                    <div className="flex items-center gap-4">
                      <p className={`font-semibold ${item.type === 'income' ? 'text-green-400' : 'text-red-400'}`}>R{item.amount.toFixed(2)}</p>
                      <button onClick={() => deleteItem(item.id)} className="px-3 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600" aria-label={`Delete ${item.description}`}>Delete</button>
                    </div>
                  </div>
                ))}
            </div>
          </section>
        </main>
      );
    };

    const Calendar = ({ user, setPage }) => {
      const [events, setEvents] = useState([]);
      const [title, setTitle] = useState('');
      const [date, setDate] = useState(getCurrentDateTime());
      const [isTransaction, setIsTransaction] = useState(false);
      const [description, setDescription] = useState('');
      const [amount, setAmount] = useState('');
      const [type, setType] = useState('income');
      const [showAddEventForm, setShowAddEventForm] = useState(false);
      const [accessibleUsers, setAccessibleUsers] = useState([]);
      const [selectedUsers, setSelectedUsers] = useState([user.username]);
      const [userProfiles, setUserProfiles] = useState({ [user.username]: user.profilePicUrl });
      const [showEventModal, setShowEventModal] = useState(false);
      const [selectedEvent, setSelectedEvent] = useState(null);
      const [searchQuery, setSearchQuery] = useState('');
      const [filterType, setFilterType] = useState('all');
      const calendarRef = useRef(null);

      const fetchAccessibleUsers = async () => {
        try {
          const { data } = await axios.get('https://ourlife.work.gd:8443/api/get-access', { params: { viewer: user.username }, timeout: 5000 });
          if (data.success) {
            const accessible = [user.username, ...data.accessList.filter(a => a.viewer === user.username).map(a => a.target)];
            setAccessibleUsers(accessible);
            setSelectedUsers(accessible);
            const profiles = { [user.username]: user.profilePicUrl || DEFAULT_PROFILE_PIC_URL };
            for (const u of accessible) {
              if (u !== user.username) profiles[u] = (await axios.get(`https://ourlife.work.gd:8443/api/profile-pictures?username=${u}`, { timeout: 5000 })).data.profilePicUrl || DEFAULT_PROFILE_PIC_URL;
            }
            setUserProfiles(profiles);
          }
        } catch (err) {
          setAccessibleUsers([user.username]);
          setSelectedUsers([user.username]);
        }
      };

      const fetchEvents = async () => {
        try {
          const { data } = await axios.get('https://ourlife.work.gd:8443/api/calendar', { params: { user: user.username }, timeout: 5000 });
          setEvents(data);
          if (calendarRef.current) {
            const calendar = calendarRef.current.getApi();
            calendar.removeAllEvents();
            data
              .filter(e => selectedUsers.includes(e.user) && e.title.toLowerCase().includes(searchQuery.toLowerCase()) && (filterType === 'all' || (e.isTransaction && e.type === filterType) || (!e.isTransaction && filterType === 'event')))
              .forEach(event => {
                calendar.addEvent({
                  id: event.id,
                  title: `${event.title} (${capitalizeFirstLetter(event.user)})`,
                  start: event.date,
                  backgroundColor: event.eventColor || (event.isTransaction ? (event.type === 'income' ? '#00FF00' : '#FF0000') : user.eventColor || DEFAULT_EVENT_COLOR),
                  borderColor: event.eventColor || (event.isTransaction ? (event.type === 'income' ? '#00FF00' : '#FF0000') : user.eventColor || DEFAULT_EVENT_COLOR),
                  extendedProps: { user: event.user, isTransaction: event.isTransaction, type: event.type, amount: event.amount }
                });
              });
          }
        } catch (err) {}
      };

      const addEvent = async () => {
        if (!title || !date) return;
        try {
          const eventData = { user: user.username, title, date, transaction: isTransaction, type: isTransaction ? type : null, amount: isTransaction ? parseFloat(amount) : null, eventColor: user.eventColor || DEFAULT_EVENT_COLOR, description: isTransaction ? description : null };
          const { data } = await axios.post('https://ourlife.work.gd:8443/api/calendar', eventData, { timeout: 5000 });
          setEvents([...events, data]);
          setTitle('');
          setDate(getCurrentDateTime());
          setIsTransaction(false);
          setDescription('');
          setAmount('');
          setType('income');
          setShowAddEventForm(false);
          fetchEvents();
        } catch (err) {}
      };

      const deleteEvent = async id => {
        try {
          await axios.delete(`https://ourlife.work.gd:8443/api/calendar/${id}`, { timeout: 5000 });
          setEvents(events.filter(event => event.id !== id));
          fetchEvents();
        } catch (err) {}
      };

      const toggleUser = u => setSelectedUsers(p => p.includes(u) ? p.filter(x => x !== u) : [...p, u]);

      useEffect(() => {
        fetchAccessibleUsers();
        fetchEvents();
        if (calendarRef.current) {
          const calendar = new FullCalendar.Calendar(calendarRef.current, {
            initialView: 'dayGridMonth',
            height: 'auto',
            events: [],
            eventClick: info => {
              setSelectedEvent({
                id: info.event.id,
                title: info.event.title.replace(` (${capitalizeFirstLetter(info.event.extendedProps.user)})`, ''),
                date: info.event.start,
                user: info.event.extendedProps.user,
                isTransaction: info.event.extendedProps.isTransaction,
                type: info.event.extendedProps.type,
                amount: info.event.extendedProps.amount
              });
              setShowEventModal(true);
            }
          });
          calendar.render();
          calendarRef.current.calendar = calendar;
        }
      }, []);

      useEffect(() => { fetchEvents(); }, [selectedUsers, searchQuery, filterType]);

      return (
        <main className="p-4 sm:p-6 max-w-4xl mx-auto">
          <section className="card p-8">
            <h1 className="text-2xl font-bold mb-6 flex items-center gap-3">
              <div className="profile-pic-container"><img src={user.profilePicUrl || DEFAULT_PROFILE_PIC_URL} alt={`${user.username}'s profile`} className="profile-pic" /></div>
              <span>Calendar</span>
            </h1>
            <div className="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
              <button onClick={() => setShowAddEventForm(!showAddEventForm)} className="px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600" aria-label={showAddEventForm ? 'Hide Form' : 'Add Event'}>{showAddEventForm ? 'Hide Form' : 'Add Event'}</button>
              <div className="flex space-x-3 w-full sm:w-auto">
                <input type="text" placeholder="Search by title" value={searchQuery} onChange={e => setSearchQuery(e.target.value)} className="p-3 rounded-lg" aria-label="Search events" />
                <select value={filterType} onChange={e => setFilterType(e.target.value)} className="p-3 rounded-lg" aria-label="Filter by type">
                  <option value="all">All</option>
                  <option value="event">Events</option>
                  <option value="income">Income</option>
                  <option value="expense">Expense</option>
                </select>
              </div>
            </div>
            {showAddEventForm && (
              <div className="mb-6 p-4 card">
                <input type="text" placeholder="Event Title" value={title} onChange={e => setTitle(e.target.value)} className="w-full p-3 mb-4" aria-label="Event Title" />
                <input type="datetime-local" value={date} onChange={e => setDate(e.target.value)} className="w-full p-3 mb-4" aria-label="Date" />
                <label className="flex items-center gap-2 mb-4">
                  <input type="checkbox" checked={isTransaction} onChange={e => setIsTransaction(e.target.checked)} className="rounded text-teal-500 focus:ring-teal-400" aria-label="Is Transaction" />
                  <span>Is Transaction</span>
                </label>
                {isTransaction && (
                  <>
                    <input type="text" placeholder="Description" value={description} onChange={e => setDescription(e.target.value)} className="w-full p-3 mb-4" aria-label="Description" />
                    <input type="number" placeholder="Amount" value={amount} onChange={e => setAmount(e.target.value)} className="w-full p-3 mb-4" aria-label="Amount" />
                    <select value={type} onChange={e => setType(e.target.value)} className="w-full p-3 mb-4" aria-label="Type">
                      <option value="income">Income</option>
                      <option value="expense">Expense</option>
                    </select>
                  </>
                )}
                <button onClick={addEvent} className="w-full p-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600" aria-label="Add Event">Add Event</button>
              </div>
            )}
            <div className="mb-6">
              <h2 className="text-lg font-semibold mb-2">Filter by User</h2>
              <div className="flex flex-wrap gap-2">
                {accessibleUsers.map(u => (
                  <label key={u} className="flex items-center gap-2">
                    <input type="checkbox" checked={selectedUsers.includes(u)} onChange={() => toggleUser(u)} className="rounded text-teal-500 focus:ring-teal-400" aria-label={`Filter by ${u}`} />
                    <div className="event-profile-pic-container"><img src={userProfiles[u] || DEFAULT_PROFILE_PIC_URL} alt={`${u}'s profile`} className="event-profile-pic" /></div>
                    <span>{capitalizeFirstLetter(u)}</span>
                  </label>
                ))}
              </div>
            </div>
            <div ref={calendarRef} className="mb-6"></div>
            {showEventModal && selectedEvent && (
              <div className="fixed inset-0 flex items-center justify-center bg-black bg-opacity-50 z-50">
                <div className="modal card p-6 w-full max-w-md show">
                  <h2 className="text-xl font-bold mb-4">{selectedEvent.title}</h2>
                  <p className="mb-2">Date: {formatDateTimeWithSeconds(selectedEvent.date)}</p>
                  <p className="mb-2">User: {capitalizeFirstLetter(selectedEvent.user)}</p>
                  {selectedEvent.isTransaction && (
                    <>
                      <p className="mb-2">Type: {capitalizeFirstLetter(selectedEvent.type)}</p>
                      <p className="mb-2">Amount: R{selectedEvent.amount?.toFixed(2)}</p>
                    </>
                  )}
                  <div className="flex justify-end gap-2">
                    <button onClick={() => setShowEventModal(false)} className="px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600" aria-label="Close">Close</button>
                    <button onClick={() => { deleteEvent(selectedEvent.id); setShowEventModal(false); }} className="px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600" aria-label="Delete Event">Delete</button>
                  </div>
                </div>
              </div>
            )}
          </section>
        </main>
      );
    };

    const ProfileSettings = ({ user, setUser }) => {
      const [profilePic, setProfilePic] = useState(null);
      const [profilePicUrl, setProfilePicUrl] = useState(user.profilePicUrl || DEFAULT_PROFILE_PIC_URL);
      const [email, setEmail] = useState(user.email || '');
      const [phone, setPhone] = useState(user.phone || '');
      const [address, setAddress] = useState(user.address || '');
      const [eventColor, setEventColor] = useState(user.eventColor || DEFAULT_EVENT_COLOR);
      const [theme, setTheme] = useState(localStorage.getItem('theme') || 'style-original');
      const [currentPassword, setCurrentPassword] = useState('');
      const [newPassword, setNewPassword] = useState('');
      const [confirmPassword, setConfirmPassword] = useState('');
      const [error, setError] = useState('');
      const [success, setSuccess] = useState('');

      const handleProfilePicChange = e => {
        const file = e.target.files[0];
        if (file) {
          setProfilePic(file);
          setProfilePicUrl(URL.createObjectURL(file));
        }
      };

      const saveProfile = async () => {
        setError('');
        setSuccess('');
        try {
          let newProfilePicUrl = profilePicUrl;
          if (profilePic) {
            const formData = new FormData();
            formData.append('username', user.username);
            formData.append('profilePic', profilePic);
            const { data } = await axios.post('https://ourlife.work.gd:8443/api/upload-profile-pic', formData, { timeout: 5000, headers: { 'Content-Type': 'multipart/form-data' } });
            if (data.success) newProfilePicUrl = data.profilePicUrl;
            else throw new Error(data.message || 'Failed to upload profile picture.');
          }
          const profileData = { username: user.username, profilePicUrl: newProfilePicUrl, email, phone, address, eventColor };
          const { data } = await axios.post('https://ourlife.work.gd:8443/api/profile-pictures', profileData, { timeout: 5000 });
          if (data.success) {
            setUser({ ...user, profilePicUrl: newProfilePicUrl, email, phone, address, eventColor });
            setSuccess('Profile updated successfully!');
          } else {
            throw new Error('Failed to save profile.');
          }
        } catch (err) {
          setError(err.response?.data?.message || 'Error saving profile.');
        }
      };

      const changePassword = async () => {
        setError('');
        setSuccess('');
        if (newPassword !== confirmPassword) {
          setError('New passwords do not match.');
          return;
        }
        try {
          const { data } = await axios.post('https://ourlife.work.gd:8443/api/update-password', { username: user.username, currentPassword, newPassword }, { timeout: 5000 });
          if (data.success) {
            setSuccess('Password updated successfully!');
            setCurrentPassword('');
            setNewPassword('');
            setConfirmPassword('');
          } else {
            setError(data.message || 'Failed to update password.');
          }
        } catch (err) {
          setError(err.response?.data?.message || 'Error updating password.');
        }
      };

      const handleThemeChange = e => {
        const newTheme = e.target.value;
        setTheme(newTheme);
        localStorage.setItem('theme', newTheme);
        document.body.className = newTheme;
      };

      useEffect(() => { document.body.className = theme; }, [theme]);

      return (
        <main className="p-4 sm:p-6 max-w-4xl mx-auto">
          <section className="card p-8">
            <h1 className="text-2xl font-bold mb-6 flex items-center gap-3">
              <div className="profile-pic-container"><img src={profilePicUrl} alt={`${user.username}'s profile`} className="profile-pic" /></div>
              <span>Profile Settings</span>
            </h1>
            <div className="space-y-4">
              <div>
                <label className="block mb-1 font-semibold">Profile Picture</label>
                <input type="file" accept="image/jpeg,image/png" onChange={handleProfilePicChange} className="w-full" aria-label="Profile Picture" />
              </div>
              <div>
                <label className="block mb-1 font-semibold">Email</label>
                <input type="email" value={email} onChange={e => setEmail(e.target.value)} className="w-full p-3" aria-label="Email" />
              </div>
              <div>
                <label className="block mb-1 font-semibold">Phone</label>
                <input type="tel" value={phone} onChange={e => setPhone(e.target.value)} className="w-full p-3" aria-label="Phone" />
              </div>
              <div>
                <label className="block mb-1 font-semibold">Address</label>
                <textarea value={address} onChange={e => setAddress(e.target.value)} className="w-full p-3" rows="4" aria-label="Address"></textarea>
              </div>
              <div>
                <label className="block mb-1 font-semibold">Event Color</label>
                <input type="color" value={eventColor} onChange={e => setEventColor(e.target.value)} className="w-full h-10" aria-label="Event Color" />
              </div>
              <div>
                <label className="block mb-1 font-semibold">Theme</label>
                <select value={theme} onChange={handleThemeChange} className="w-full p-3" aria-label="Theme">
                  <option value="style-original">Original</option>
                  <option value="style-futuristic">Futuristic</option>
                  <option value="style-medieval">Medieval Red</option>
                </select>
              </div>
              <button onClick={saveProfile} className="w-full p-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600" aria-label="Save Profile">Save Profile</button>
              <h2 className="text-xl font-bold mt-6 mb-4">Change Password</h2>
              <div>
                <label className="block mb-1 font-semibold">Current Password</label>
                <input type="password" value={currentPassword} onChange={e => setCurrentPassword(e.target.value)} className="w-full p-3" aria-label="Current Password" />
              </div>
              <div>
                <label className="block mb-1 font-semibold">New Password</label>
                <input type="password" value={newPassword} onChange={e => setNewPassword(e.target.value)} className="w-full p-3" aria-label="New Password" />
              </div>
              <div>
                <label className="block mb-1 font-semibold">Confirm New Password</label>
                <input type="password" value={confirmPassword} onChange={e => setConfirmPassword(e.target.value)} className="w-full p-3" aria-label="Confirm New Password" />
              </div>
              {error && <p className="text-red-400 text-sm text-center">{error}</p>}
              {success && <p className="text-green-400 text-sm text-center">{success}</p>}
              <button onClick={changePassword} className="w-full p-3 bg-teal-500 text-white rounded-lg hover:bg-teal-600" aria-label="Change Password">Change Password</button>
            </div>
          </section>
        </main>
      );
    };

    const BudgetCalculator = () => (
      <main className="p-4 sm:p-6 max-w-4xl mx-auto">
        <section className="card p-8">
          <h1 className="text-2xl font-bold mb-6">Budget Calculator</h1>
          <p>Feature under development.</p>
        </section>
      </main>
    );

    const About = () => (
      <main className="p-4 sm:p-6 max-w-4xl mx-auto">
        <section className="card p-8">
          <h1 className="text-2xl font-bold mb-6">About</h1>
          <p>OurLife Dashboard is your personal finance and event management tool.</p>
        </section>
      </main>
    );

    const Support = () => (
      <main className="p-4 sm:p-6 max-w-4xl mx-auto">
        <section className="card p-8">
          <h1 className="text-2xl font-bold mb-6">Support</h1>
          <p>Contact our support team at support@ourlife.work.gd.</p>
        </section>
      </main>
    );

    const Contact = () => (
      <main className="p-4 sm:p-6 max-w-4xl mx-auto">
        <section className="card p-8">
          <h1 className="text-2xl font-bold mb-6">Contact</h1>
          <p>Email us at contact@ourlife.work.gd or call +27 123 456 789.</p>
        </section>
      </main>
    );

    const App = () => {
      const [user, setUser] = useState(null);
      const [page, setPage] = useState('login');

      useEffect(() => {
        const savedTheme = localStorage.getItem('theme') || 'style-original';
        document.body.className = savedTheme;
      }, []);

      const handleLogin = userData => {
        setUser(userData);
        setPage('menu');
      };

      const handleLogout = () => {
        setUser(null);
        setPage('login');
      };

      return (
        <ErrorBoundary>
          {user && page !== 'login' ? (
            <>
              <Navigation user={user} setPage={setPage} onLogout={handleLogout} />
              {page === 'menu' && <Menu user={user} setPage={setPage} />}
              {page === 'transactions' && <Transactions user={user} />}
              {page === 'calendar' && <Calendar user={user} setPage={setPage} />}
              {page === 'profileSettings' && <ProfileSettings user={user} setUser={setUser} />}
              {page === 'budgetCalculator' && <BudgetCalculator />}
              {page === 'about' && <About />}
              {page === 'support' && <Support />}
              {page === 'contact' && <Contact />}
            </>
          ) : (
            <Login onLogin={handleLogin} />
          )}
        </ErrorBoundary>
      );
    };

    ReactDOM.render(<App />, document.getElementById('root'));
  </script>
</body>
</html>
